<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Development on Mehdi Sadeghi</title>
    <link>http://localhost:1313/tags/development/</link>
    <description>Recent content in Development on Mehdi Sadeghi</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Sun, 14 Jun 2015 13:10:00 +0200</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/development/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Watch DRM-Protected Content on Debian Jessie</title>
      <link>http://localhost:1313/post/flash_drm_on_debian_jessie/</link>
      <pubDate>Sun, 14 Jun 2015 13:10:00 +0200</pubDate>
      
      <guid>http://localhost:1313/post/flash_drm_on_debian_jessie/</guid>
      <description>&lt;p&gt;I have recently installed Debian 8.0 (codenamed Jessie) and like many other distros I have to gradually fix problems that I came across. Here is how I managed to watch Amazon&amp;rsquo;s prime videos using Iceweasel.&lt;/p&gt;

&lt;p&gt;Trying to watch Amazon&amp;rsquo;s videos which are DRM-protected results in an error pages in Iceweasel on Debian. Flash is installed on my machine but DRM content
on Flash requires HAL to play. The problem is that HAL is deprecated and is not used anymore by major distributions including Debian.&lt;/p&gt;

&lt;p&gt;To make it work first I had to install a modified libhub library. This library does not provide full HAL functionality (which I don&amp;rsquo;t need) instead it has the bare minimum to let the Flash to decode the DRM content. This package is called &lt;a href=&#34;https://aur.archlinux.org/packages/hal-flash/&#34;&gt;hal-flash&lt;/a&gt; and is available for &lt;a href=&#34;https://github.com/cshorler/hal-flash/archive/v0.3.0.tar.gz&#34;&gt;download&lt;/a&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ tar xzf hal-flash-0.3.0.tar.gz
$ cd hal-flash
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This package has a few dependencies that should be installed first. Please pay attention that I have already installed other build related packages on my machine so you might experience other errors that I did not have.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;hal-flash-0.3.0$ sudo apt-get install dbus udisks2 autoconf git pkgconfig
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;At this stage I tried autoconf to generate configure script but it failed. So I found a &lt;a href=&#34;https://bbs.archlinux.org/viewtopic.php?pid=1258673#p1258673&#34;&gt;workaround&lt;/a&gt; which suggests doing the following to have a working configure script.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;hal-flash$ sudo apt-get install pkg-config xorg-server-devel libtool automake
hal-flash$ libtoolize --force
hal-flash$ aclocal
hal-flash$ autoheader
hal-flash$ automake --force-missing --add-missing
hal-flash$ autoconf
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;At this stage I had a working configure script.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;hal-flash$ ./configure
hal-flash$ make
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;I&amp;rsquo;m used to install compiled source codes with &lt;code&gt;checkinstall&lt;/code&gt; script. It let the package manager to track the installed files.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;hal-flash$ sudo apt-get install checkinstall
hal-flash$ sudo checkinstall make install
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Make sure to change the version number, otherwise the install script will complain that version number can&amp;rsquo;t be a string. If everything goes well we should have the libhal.so installed in system library path.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;mehdi@debian:~/Downloads/hal-flash$ ls -l /usr/local/lib/libhal.so
lrwxrwxrwx 1 root staff 15 Jun 13 11:01 /usr/local/lib/libhal.so -&amp;gt; libhal.so.1.0.0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Before trying the Amazon videos we need to remove existing Flash files and make sure that the udisks2 service is running.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;mehdi@debian:~/Downloads/hal-flash$ systemctl start udisks2.service
mehdi@debian:~/Downloads/hal-flash$ systemctl status udisks2.service
● udisks2.service - Disk Manager
   Loaded: loaded (/lib/systemd/system/udisks2.service; static)
   Active: active (running) since Sa 2015-06-13 10:59:43 CEST; 1 day 2h ago
     Docs: man:udisks(8)
 Main PID: 26013 (udisksd)
   CGroup: /system.slice/udisks2.service
           └─26013 /usr/lib/udisks2/udisksd --no-debug
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;And removing the files.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;mehdi@debian:~/Downloads/hal-flash$ rm -rf ~/.adobe/Flash_Player/*
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;I did a &lt;code&gt;killall iceweasel&lt;/code&gt; and after that I was able to watch the videos. I hope it works well for you as well!&lt;/p&gt;

&lt;p&gt;At the end I have to give credit to awesome people at Archlinux for their perfect documentations.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>